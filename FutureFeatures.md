# RuVox — Future Features

Функционал для реализации после MVP.

---

## Приоритет 1: Улучшения UX

### 1.1 Предпросмотр нормализации

Перед синтезом показывать диалог с результатом нормализации:

```
┌─ Предпросмотр ───────────────────────────────────────────────┐
│                                                              │
│  ┌─ Оригинал ───────────────────────────────────────────────┐│
│  │ Установите Docker версии >= 20.10 с https://docker.com   ││
│  └──────────────────────────────────────────────────────────┘│
│                                                              │
│  ┌─ После нормализации ─────────────────────────────────────┐│
│  │ Установите докер версии больше или равно двадцать        ││
│  │ точка десять с эйч ти ти пи эс двоеточие слэш слэш       ││
│  │ docker точка ком                                         ││
│  └──────────────────────────────────────────────────────────┘│
│                                                              │
│  ☐ Показывать этот диалог всегда                             │
│                                                              │
│            [Редактировать] [Синтезировать] [Отмена]          │
└──────────────────────────────────────────────────────────────┘
```

**Возможности:**
- Редактирование нормализованного текста перед синтезом
- Добавление слов в словарь IT-терминов прямо из диалога
- Опция "не показывать для коротких текстов"

---

### 1.2 Редактирование текста перед TTS

- Режим редактирования в TextViewer (переключение readonly ↔ edit)
- Возможность исправить ошибки в тексте до синтеза
- Сохранение оригинала и отредактированной версии

---

### 1.3 Улучшенная синхронизация текст-аудио

- Подсветка не только текущего слова, но и ±2 слова контекста
- Разные цвета для прошлого/текущего/будущего текста
- Миникарта прогресса в текстовом виджете

```
Обычный текст [прошлое слово] [ТЕКУЩЕЕ] [будущее слово] обычный текст
              светло-серый    жёлтый+bold  светло-жёлтый
```

---

### 1.4 Закладки в аудио

- Возможность отметить интересное место
- Список закладок с превью текста
- Быстрый переход к закладке

---

### 1.5 A-B Loop

- Выделить участок для повторного прослушивания
- Автоматический повтор выделенного фрагмента
- Полезно для изучения сложных терминов

---

## Приоритет 2: Дополнительные способы ввода

### 2.1 Drag & Drop файлов

- Поддержка форматов: .txt, .md, .html, .epub
- Извлечение текста из HTML (удаление тегов)
- Парсинг EPUB по главам

### 2.2 Watch-папка

- Мониторинг указанной папки
- Автоматическое добавление новых файлов
- Настройка фильтров по расширению

### 2.3 Выделение + хоткей (системное)

- Читать выделенный текст в любом приложении
- Требует интеграции с D-Bus / wl-clipboard
- Альтернатива буферу обмена

### 2.4 CLI интеграция

```bash
# Добавить текст напрямую
ruvox --add "Текст для чтения"

# Из pipe
echo "Текст" | ruvox --stdin

# Из файла
ruvox --file article.md

# Экспорт аудио
ruvox --export --output article.wav --file article.md
```

---

## Приоритет 3: Расширенное управление

### 3.1 Плейлисты

- Группировка записей в плейлисты
- Именованные плейлисты (Статьи, Документация, Книги)
- Экспорт плейлиста как один аудиофайл

### 3.2 Теги и категории

- Автоматические теги по источнику
- Ручные теги
- Фильтрация по тегам

### 3.3 Поиск по истории

- Полнотекстовый поиск
- Фильтры по дате, статусу, тегам
- Сохранённые поисковые запросы

### 3.4 Batch-режим

- Объединение нескольких текстов в один аудиофайл
- Настройка пауз между фрагментами
- Прогресс генерации для длинных текстов

---

## Приоритет 4: Кэширование и оптимизация

### 4.1 Умное кэширование

- Хеширование normalized_text + speaker + speed
- При повторном запросе — использовать кэш
- Управление размером кэша

### 4.2 Инкрементальный TTS

- Для длинных текстов — синтез по абзацам
- Начало воспроизведения до завершения полного синтеза
- Индикатор прогресса синтеза

### 4.3 Предзагрузка

- Предсинтез следующего элемента очереди
- Фоновая генерация при простое

---

## Приоритет 5: Экспорт и интеграция

### 5.1 Экспорт аудио

- Сохранение в файл: WAV, MP3, OGG
- Batch-экспорт всей очереди
- Настройка качества

### 5.2 Экспорт с субтитрами

- SRT файл с timestamps
- Аудио + субтитры для видео
- VTT формат для веба

### 5.3 Интеграция с медиаплеерами

- MPRIS2 поддержка (управление из системы)
- Интеграция с медиакнопками клавиатуры
- Отображение в системных уведомлениях о воспроизведении

---

## Приоритет 6: Настройки TTS

### 6.1 Несколько голосов

- Профили голосов (спикер + скорость + sample_rate)
- Быстрое переключение между профилями
- Разные голоса для разных типов контента

### 6.2 SSML поддержка

- Разметка пауз, интонации
- Произношение аббревиатур
- Управление скоростью отдельных фраз

### 6.3 Пользовательский словарь

- UI для управления IT-терминами
- Добавление/редактирование/удаление
- Импорт/экспорт словаря
- Синхронизация с основным пайплайном

---

## Приоритет 7: Accessibility

### 7.1 Клавиатурная навигация

- Полное управление без мыши
- Фокус-индикаторы
- Стандартные сочетания (Tab, Enter, Escape)

### 7.2 Масштабирование UI

- Поддержка системного масштаба
- Настройка размера шрифта
- High DPI support

### 7.3 Темы оформления

- Следование системной теме (light/dark)
- Высококонтрастный режим

---

## Приоритет 8: Мониторинг и отладка

### 8.1 Логирование

- Настраиваемый уровень логов
- Просмотр логов из UI
- Экспорт для отладки

### 8.2 Статистика использования

- Сколько текста озвучено
- Среднее время синтеза
- Популярные источники текста

### 8.3 Отладка нормализации

- Показ промежуточных шагов пайплайна
- Какие правила применились
- Помощь в улучшении словарей

---

## Технический долг

### После MVP следует:

1. **Юнит-тесты для UI** — pytest-qt
2. **E2E тесты** — Playwright или аналог
3. **CI/CD** — автоматическая сборка
4. **Документация** — пользовательская и разработческая
5. **Локализация** — подготовка к i18n (хотя приложение для русского)
6. **Пакетирование:**
   - Nix flake
   - AppImage
   - Flatpak
7. **Автообновление** — проверка новых версий

---

## Идеи для исследования

### Голосовое управление

- Команды "пауза", "дальше", "повтори"
- Требует распознавания речи

### AI-суммаризация

- Краткое содержание длинных текстов
- Ключевые тезисы перед полным прослушиванием

### Мультиязычность

- Детекция языка фрагментов
- Переключение между TTS-моделями
- Смешанный русско-английский текст с правильным произношением

### Интеграция с браузером

- Расширение для чтения веб-страниц
- Сохранение статей в очередь
- Reader mode + TTS
